<project name="PyConsole" default="build.PyConsole">

	<property file="../PyConsole/build_pyconsole.properties" />	
	<import file="../PyUtils/commons.xml"/>
	
	<target name="build.PyConsole" depends="projects" description="build PyConsole application">
		<property name="application.name" value="PyConsole"/>		
		<antcall target="build.application">
			<param name="start.script" value="src/pyconsole/programs/test_poincare.py"/>
		</antcall>
	</target>
	
	<target name="build.PyCursesMed" depends="projects" description="build PyCursesMed application">
		<property name="application.name" value="PyCursesMed"/>		
		<antcall target="build.application">
			<param name="start.script" value="src/pyconsole/programs/main_curses_med.py"/>
		</antcall>
	</target>	

	<target name="projects">
		<ant dir="../PyCore" antfile="build_pycore.xml" inheritall="false" target="rebuild.egg"/>
		<ant dir="../PyCommon" antfile="build_pycommon.xml" inheritall="false" target="rebuild.egg"/>
		<ant dir="../PyMath" antfile="build_pymath.xml" inheritall="false" target="rebuild.egg"/>
		<ant dir="../PySettings" antfile="build_pysettings.xml" inheritall="false" target="rebuild.egg"/>
	</target>

	<target name="run.PyCurses" depends="projects" description="Run PyCurses">
		<exec executable="/bin/bash" os="Linux">
			<arg value="mvn" />
			<arg value="assembly:directory" />
		</exec>
		<exec executable="cmd" dir="." os="Windows Vista">
			<env key="PYTHONPATH" path="${PYTHONPATH};${egg.1};${egg.2};${egg.3};${egg.4}"/>			
			<arg value="/C" />
			<arg value="start" />
			<arg value="${python-path}/python"/>
			<arg value="src/pyconsole/programs/main_curses_med.py"/>
		</exec>
	</target>
	
</project>
